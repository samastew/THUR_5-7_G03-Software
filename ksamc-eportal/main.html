<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KSAMC E-Portal | Digital Building Approvals</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">


    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        (function() {
            emailjs.init("G-DlzUwPVp8J-bHZX");
        })();
    </script>
</head>
<body>
    <!-- Header - Fixed to span full width -->
    <header class="main-header">
        <div class="header-top">
            <div class="container">
                <div class="header-contact">
                    <span><i class="fas fa-phone"></i> (876) 922-0150</span>
                    <span><i class="fas fa-envelope"></i> info@ksamc.gov.jm</span>
                </div>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>
        
        <nav class="main-nav">
            <div class="container">
                <div class="nav-brand">
                    <div class="logo">
                        <i class="fas fa-building-columns"></i>
                        <div>
                            <h1>KSAMC E-PORTAL</h1>
                            <p class="logo-subtitle">Building Approvals System</p>
                        </div>
                    </div>
                </div>
                
                <div class="nav-menu" id="navMenu">
                    <a href="#dashboard" class="nav-item active">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#applications" class="nav-item">
                        <i class="fas fa-file-contract"></i>
                        <span>Applications</span>
                    </a>
                    <a href="#track" class="nav-item">
                        <i class="fas fa-search-location"></i>
                        <span>Track</span>
                    </a>
                    <a href="#admin" class="nav-item admin-only">
                        <i class="fas fa-user-shield"></i>
                        <span>Admin</span>
                    </a>
                    
                    <div class="user-profile">
                        <div class="user-info">
                            <span id="currentUser">Guest User</span>
                            <div class="user-actions">
                                <button id="loginBtn" class="btn-login">Sign In</button>
                                <button id="logoutBtn" class="btn-logout" style="display:none">Sign Out</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h2>Digital Building Approvals Made Simple</h2>
                <p>Submit, track, and manage your building applications online with the KSAMC E-Portal</p>
                <button id="getStartedBtn" class="btn-hero">
                    <i class="fas fa-play-circle"></i> Get Started
                </button>
            </div>
            <div class="hero-stats">
                <div class="stat">
                    <i class="fas fa-bolt"></i>
                    <div>
                        <h3>50% Faster</h3>
                        <p>Processing Time</p>
                    </div>
                </div>
                <div class="stat">
                    <i class="fas fa-file-alt"></i>
                    <div>
                        <h3>Paperless</h3>
                        <p>Digital System</p>
                    </div>
                </div>
                <div class="stat">
                    <i class="fas fa-check-circle"></i>
                    <div>
                        <h3>24/7</h3>
                        <p>Access & Tracking</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
                    <p>Monitor your applications and system activities</p>
                </div>
                
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-file-import"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Total Applications</h3>
                            <p class="stat-number" id="totalApps">0</p>
                            <span class="stat-trend up">↑ 12% this month</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-hourglass-half"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Pending Review</h3>
                            <p class="stat-number" id="pendingApps">0</p>
                            <span class="stat-trend">Awaiting</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-double"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Approved</h3>
                            <p class="stat-number" id="approvedApps">0</p>
                            <span class="stat-trend">Completed</span>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h3>Quick Actions</h3>
                    <div class="actions-grid">
                        <button id="newAppBtn" class="action-btn primary">
                            <i class="fas fa-plus-circle"></i>
                            <span>New Application</span>
                        </button>
                        
                        <button id="trackAppBtn" class="action-btn secondary">
                            <i class="fas fa-search"></i>
                            <span>Track Status</span>
                        </button>

                        <!-- NEW CODE START -->
                       <!--
                        <button id="uploadDocsBtn" button class="action-btn accent"> 
                            <i class="fas fa-upload"></i> 
                            <span>Upload Docs</span> 
                        </button> -->
                        <!-- NEW CODE END: -->

                        
                        
                        <button class="action-btn accent">
                            <i class="fas fa-upload"></i>
                            <span>Upload Docs</span>
                        </button>
                        
                        <button class="action-btn dark">
                            <i class="fas fa-download"></i>
                            <span>Downloads</span>
                        </button>
                    </div>
                </div>
                
<!-- Quick Status Update (Admin Only) -->
<div class="recent-activity admin-only" id="quickStatusUpdate" style="display: none;">
    <div class="section-header">
        <h3><i class="fas fa-sync-alt"></i> Quick Status Update</h3>
    </div>
    <div style="padding: 15px;">
        <div class="form-group" style="margin-bottom: 15px;">
            <label for="quickAppSelect" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--gray-700);">Select Application</label>
            <select id="quickAppSelect" class="form-select" style="width: 100%; padding: 10px;">
                <option value="">Select application to update...</option>
                <!-- Applications will be populated by JavaScript -->
            </select>
        </div>
        <div class="form-group" style="display: flex; gap: 10px; margin-bottom: 15px;">
            <div style="flex: 1;">
                <label for="quickStatusSelect" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--gray-700);">New Status</label>
                <select id="quickStatusSelect" class="form-select" style="width: 100%; padding: 10px;">
                    <option value="received">Received</option>
                    <option value="under_review">Under Review</option>
                    <option value="approved">Approve</option>
                    <option value="additional_info_required">Request Info</option>
                    <option value="rejected">Reject</option>
                </select>
            </div>
            <div style="display: flex; align-items: flex-end;">
                <button id="quickUpdateBtn" class="btn-search" style="padding: 10px 20px; height: fit-content;">
                    <i class="fas fa-sync-alt"></i> Update
                </button>
            </div>
        </div>
    </div>
</div>
                
                <!-- Recent Activity -->
                <div class="recent-activity">
                    <div class="section-header">
                        <h3><i class="fas fa-history"></i> Recent Activity</h3>
                        <a href="#applications" class="view-all">View All →</a>
                    </div>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon success">
                                <i class="fas fa-check"></i>
                            </div>
                            <div>
                                <h4>Application Submitted</h4>
                                <p>KSAMC-2025-001 - Residential Complex</p>
                                <small>2 hours ago</small>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Applications Section -->
            <section id="applications" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-file-contract"></i> My Applications</h2>
                    <p>Manage your building permit applications</p>
                </div>


                <!--NEW CODE SHADELLE-->
                <!-- Upload Documents Modal -->
<div id="uploadModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-file-upload"></i> Upload Building Documents</h2>
            <button class="modal-close" id="closeUploadModal">&times;</button>
        </div>
        <div class="modal-body">
            <!-- System Requirement 2.1: File format information -->
            <div class="upload-info">
                <p><strong>Supported Formats:</strong> PDF, DOCX, JPG</p>
                <p><strong>Maximum Size:</strong> 10MB per file</p>
                <p><strong>System Requirement 2.2:</strong> You can edit or delete documents before final submission</p>
            </div>
            
            <!-- Upload Area -->
            <div class="upload-section">
                <div id="uploadArea" class="upload-area">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Drag & drop your documents here</p>
                    <p style="font-size: 0.9rem; color: var(--gray-500);">or click to browse</p>
                    <input type="file" id="fileInput" accept=".pdf,.docx,.jpg,.jpeg" multiple style="display: none;">
                    <button id="browseBtn" class="btn-secondary">
                        <i class="fas fa-folder-open"></i> Browse Files
                    </button>
                </div>
                
                <!-- Progress Bar -->
                <div id="uploadProgress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p id="progressText">Uploading...</p>
                </div>
            </div>
            
            <!-- System Requirement 2.3: Document list with edit/delete -->
            <div class="documents-list">
                <h3>Uploaded Documents</h3>
                <div id="docsContainer">
                    <div class="empty-state">No documents uploaded yet</div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="cancelUpload">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveDocuments" disabled>Save Documents</button>
            </div>
        </div>
    </div>
</div>

                <!--END SHADELLE CODE-->

                <!-- System Requirements 6.2 & 6.3 -->
<div class="search-box">
    <i class="fas fa-search"></i>
    <input type="text" id="globalSearchInput" placeholder="Search by tracking #, project, or applicant...">
    
    <!-- Filter Dropdowns -->
    <select id="statusFilter" class="filter-select">
        <option value="">All Status</option>
        <option value="received">Received</option>
        <option value="under_review">Under Review</option>
        <option value="approved">Approved</option>
        <option value="rejected">Rejected</option>
        <option value="additional_info_required">Info Required</option>
    </select>
    
    <select id="dateFilter" class="filter-select">
        <option value="">All Dates</option>
        <option value="today">Today</option>
        <option value="week">This Week</option>
        <option value="month">This Month</option>
    </select>
    
    <button id="searchBtn" class="btn-search">
        <i class="fas fa-search"></i> Search
    </button>
    
    <button id="clearFiltersBtn" class="btn-secondary" style="padding: 10px 15px; background: var(--gray-200);">
        <i class="fas fa-times"></i> Clear
    </button>
</div>
<!--  END -->


                <div class="applications-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Tracking #</th>
                                <th>Project</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="appsTableBody">
                            <!-- Will be populated by JavaScript -->
                            <tr>
                                <td colspan="5" class="empty-state">No applications yet. Click "New Application" to get started.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Tracking Section -->
            <section id="track" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-search-location"></i> Track Application</h2>
                    <p>Check real-time status of your applications</p>
                </div>
                
                <div class="track-container">
                    <div class="track-input-group">
                        <div class="input-with-icon">
                            <i class="fas fa-barcode"></i>
                            <input type="text" id="trackInput" placeholder="Enter Tracking Number (e.g., KSAMC-2025-001)">
                        </div>
                        <button id="trackBtn" class="btn-track">
                            <i class="fas fa-search"></i> Track
                        </button>
                    </div>
                    
                    <div id="trackResult" class="track-result">
                        <div class="result-header">
                            <h3>Application Status</h3>
                            <div class="tracking-number">
                                <i class="fas fa-fingerprint"></i>
                                <span>Tracking #: <strong id="trackNumber">-</strong></span>
                            </div>
                        </div>
                        
                        <div class="status-display">
                            <div class="current-status">
                                <h4>Current Status</h4>
                                <span id="trackStatus" class="status-badge">Not Found</span>
                                <p>Last updated: <span id="trackUpdate">-</span></p>
                            </div>
                            
                            <!-- SAMARA: This section fulfills System Requirement 3.3: "The system shall display a log of status changes with timestamps for the client to view." -->
                            <div class="status-timeline">
                                <h4>Status History Log</h4>
                                <div id="statusTimeline">
                                    <div class="timeline-item">
                                        <div class="timeline-dot"></div>
                                        <div class="timeline-content">
                                            <span class="timeline-date">-</span>
                                            <span class="timeline-status">No data</span>
                                            <p class="timeline-desc">Enter a tracking number to see status history with timestamps</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Admin Section -->
            <section id="admin" class="content-section admin-only">
                <div class="section-header">
                    <h2><i class="fas fa-user-shield"></i> Administration</h2>
                    <p>Manage applications and update statuses</p>
                </div>
                
                <div class="admin-panel">
                    <div class="admin-section">
                        <h3>Update Application Status</h3>
                        <div class="admin-form">
                            <div class="form-group">
                                <label>Select Application</label>
                                <select id="appSelect" class="form-select">
                                    <option value="">Choose application...</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>New Status</label>
                                <select id="statusSelect" class="form-select">
                                    <option value="under_review">Under Review</option>
                                    <option value="approved">Approve</option>
                                    <option value="additional_info_required">Request Info</option>
                                    <option value="rejected">Reject</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Notes</label>
                                <textarea id="statusNotes" class="form-textarea" 
                                          placeholder="Enter notes for applicant..."></textarea>
                            </div>
                            
                            <button id="updateStatusBtn" class="btn-admin">
                                <i class="fas fa-sync-alt"></i> Update Status
                            </button>
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h3>Recent Applications</h3>
                        <div id="adminAppsList" class="apps-list">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-building-columns"></i>
                        <h3>KSAMC E-Portal</h3>
                    </div>
                    <p class="footer-description">
                        Digital platform for building approvals under Kingston & St. Andrew Municipal Corporation.
                    </p>
                </div>
                
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="#dashboard">Dashboard</a></li>
                        <li><a href="#applications">Applications</a></li>
                        <li><a href="#track">Track</a></li>
                        <li><a href="#admin">Admin</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Contact</h4>
                    <div class="contact-info">
                        <p><i class="fas fa-map-marker-alt"></i> 24 Church St, Kingston</p>
                        <p><i class="fas fa-phone"></i> (876) 922-0150</p>
                        <p><i class="fas fa-envelope"></i> ksamctest2140@gmail.com</p>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4>Hours</h4>
                    <div class="hours-info">
                        <p>Mon-Thu: 8:30AM - 4:30PM</p>
                        <p>Fri: 8:30AM - 3:30PM</p>
                        <p>Weekends: Closed</p>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 KSAMC. Group THUR_5-7_G03 - COMP2140 Software Engineering</p>
                <div class="footer-links-bottom">
                    <a href="#">Privacy</a>
                    <a href="#">Terms</a>
                    <a href="#">Accessibility</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-sign-in-alt"></i> Login / Register</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="authForm">
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="authUsername" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="authEmail" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="authPassword" class="form-input" required>
                        <small style="color: #666; font-size: 12px;">Must be at least 8 characters with a number and symbol (@$!%*#?&)</small>
                    </div>
                    <div class="form-group">
                        <label>Role</label>
                        <select id="authRole" class="form-input">
                            <option value="client">Client</option>
                            <option value="admin">Admin Staff</option>
                            <option value="reviewer">Review Officer</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelModal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="appModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-file-upload"></i> New Application</h2>
                <button class="modal-close" id="closeAppModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="appForm">
                    <div class="form-group">
                        <label>Project Name *</label>
                        <input type="text" id="projectName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label>Property Address *</label>
                        <textarea id="propertyAddress" class="form-input" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Project Type</label>
                        <select id="projectType" class="form-input">
                            <option value="residential">Residential</option>
                            <option value="commercial">Commercial</option>
                            <option value="industrial">Industrial</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="projectDesc" class="form-input"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelApp">Cancel</button>
                        <button type="submit" class="btn btn-primary">Submit Application</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Notifications -->
    <div id="notificationContainer"></div>

    <script src="main.js"></script>

    
</body>
</html>